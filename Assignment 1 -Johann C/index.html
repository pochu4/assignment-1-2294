<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>MDIA 2294</title>

	<style>
		thead {
			font-weight: bold;
		}

		td {
			padding-left: 5px;
			padding-right: 5px;
		}

		td.sub-total {
			text-align: right;
		}
	</style>
</head>

<body>
	<h1>MDIA 2294: ACME Corp Invoice</h1>

	<table>
		<thead>
			<tr>
				<td>ITEM</td>
				<td>DESCRIPTION</td>
				<td>QTY</td>
				<td>PRICE</td>
				<td>LINE TOTAL</td>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>1</td>
				<td><input id="line-1-description" type="text" size="40" value="KitKat" /></td>
				<td><input id="line-1-quantity" type="text" size="3" value="5" /></td>
				<td><input id="line-1-price" type="text" size="6" value="35.00" /></td>
				<td class="sub-total"><span id="line-1"></span></td>
			</tr>
			<tr>
				<td>2</td>
				<td><input id="line-2-description" type="text" size="40" value="Sour Patch Kids" /></td>
				<td><input id="line-2-quantity" type="text" size="3" value="2" /></td>
				<td><input id="line-2-price" type="text" size="6" value="24.99" /></td>
				<td class="sub-total"><span id="line-2"></span></td>
			</tr>
			<tr>
				<td>3</td>
				<td><input id="line-3-description" type="text" size="40" value="Lindt" /></td>
				<td><input id="line-3-quantity" type="text" size="3" value="1" /></td>
				<td><input id="line-3-price" type="text" size="6" value="125.50" /></td>
				<td class="sub-total"><span id="line-3"></span></td>
			</tr>
			<tr>
				<td>4</td>
				<td><input id="line-4-description" type="text" size="40" value="Crocs" /></td>
				<td><input id="line-4-quantity" type="text" size="3" value="1000" /></td>
				<td><input id="line-4-price" type="text" size="6" value="0.25" /></td>
				<td class="sub-total"><span id="line-4"></span></td>
			</tr>
			<tr>
				<td>5</td>
				<td><input id="line-5-description" type="text" size="40" value="Watermelon" /></td>
				<td><input id="line-5-quantity" type="text" size="3" value="12" /></td>
				<td><input id="line-5-price" type="text" size="6" value="15.25" /></td>
				<td class="sub-total"><span id="line-5"></span></td>
			</tr>
		</tbody>
		<tfoot>
			<tr>
				<td colspan="4" style="text-align:right;">SUB TOTAL</td>
				<td class="sub-total"><span id="sub-total"></span></td>
			</tr>
			<tr>
				<td colspan="4" style="text-align:right;">DISCOUNT</td>
				<td class="sub-total"><span id="discount"></span></td>
			</tr>
			<tr>
				<td colspan="4" style="text-align:right;">TAX</td>
				<td class="sub-total"><span id="tax"></span></td>
			</tr>
			<tr>
				<td colspan="4" style="text-align:right;">TOTAL</td>
				<td class="sub-total" style="border-top:solid black 1px"><span id="Total"></span></td>
			</tr>
		</tfoot>
	</table>

	<div><button id="calculate">Calculate</button></div>
	<div>NOTE: discounts of 10% are given to orders over $250</div>

	<script>

		// Johann Chua - A01174894 - Assignment 1 MDIA 2294

		// creating a variable for the button to later attach the event listener to the function
		const calcBtn = document.querySelector("#calculate")

		// creating global variables for total amount, discount, and tax to kee p
		let totalAmount = 0;
		let discount = 0.10;
		let tax = 0.12;

		function runCalc() {

			let subtotal = 0;
			// saving the item 1's quantity and price  input value to a new variable to be able to multiply both quantity and price together in a new line of instructions after the retrieval of information
			const item1_quantity = document.querySelector("#line-1-quantity").value;
			const item1_price = document.querySelector("#line-1-price").value;
			// instructions for calculating item1 quantity and item1 price and setting the total into a new variable to be able to calculate the final total of all the total variables of each line. (if that makes sense LOL)
			const item1_total = item1_quantity * item1_price;
			// retrieving the blank info of line 1 total and displaying the new item1_total after above calculations
			// .toFixed(2) attached to the total to make values show only to 2 decimal places
			document.querySelector("#line-1").innerText = "$" + item1_total.toFixed(2);

			// creating variables for item 2's quantity and price to be able to reference to them later in a new line 
			const item2_quantity = document.querySelector("#line-2-quantity").value;
			const item2_price = document.querySelector("#line-2-price").value;
			// instructions for calculating item2 total from line 123 and 124
			const item2_total = item2_quantity * item2_price;
			// retrieving the blank info from line 2 total to display the new calculated data from the above line and adding the string of "$" to display before the actual number that was calculated
			document.querySelector("#line-2").innerText = "$"  + item2_total.toFixed(2);

			// creating variables for item 3 Q and P
			const item3_quantity = document.querySelector("#line-3-quantity").value;
			const item3_price = document.querySelector("#line-3-price").value;
			// variable for item 3 total which comes from multiplying item3 QxP
			const item3_total = item3_quantity * item3_price;
			// attaching item 3 total into the blank info of item3 total from the HTML
			document.querySelector("#line-3").innerText = "$" + item3_total.toFixed(2);

			// creating variable for Item 4 Q and P 
			const item4_quantity = document.querySelector("#line-4-quantity").value;
			const item4_price = document.querySelector("#line-4-price").value;
			// creating a variable for item 4 total which comes from item4 QxP
			const item4_total = item4_price * item4_quantity;
			// attaching item4 calculation from above line into the blank info from the HTML
			document.querySelector("#line-4").innerText = "$" + item4_total.toFixed(2);

			// creating variable for item5 Q and P 
			const item5_quantity = document.querySelector("#line-5-quantity").value;
			const item5_price = document.querySelector("#line-5-price").value;
			// creating variable and calculation for item5total from above line
			const item5_total = item5_price * item5_quantity;
			// displaying the calculation from above line to the blank item5 total info from html
			document.querySelector("#line-5").innerText = "$" + item5_total.toFixed(2);

			// calculating the subtotal from all 5 items' total and displaying the subtotal to the blank info of line 77
			const sub_total = item1_total + item2_total + item3_total + item4_total + item5_total;
			document.querySelector("#sub-total").innerText = "$" + sub_total.toFixed(2);

			// Discount
			// 10% discount applied to all values of subtotal that is above 250 
			// if more than or equal to  250, multiply by the global variable of discount set at 0.1 and display the calculated number to #discount 
			// else meaning discount amount = 0 and then display 0 (flipped it but same idea)
			if(sub_total >= 250) {
				discount_amount = sub_total * discount;
				document.querySelector("#discount").innerText = "$" + discount_amount.toFixed(2);
			} else {
				document.querySelector("#discount").innerText = "$" + "0";
				discount_amount = 0;
			}

			// running total, Calculate Total before tax to make sure tax amount is changed to new values of after subtotal-discount, If done after tax amount would be applying to subtotal before the discount

			totalAmount = sub_total - discount_amount;

			// tax
			// Multiply total amount with global variable of tax which is 0.12, display to #tax
			
			tax_amount = totalAmount * tax;
			document.querySelector("#tax").innerText = "$" + tax_amount.toFixed(2);

			// total
			totalAmount = sub_total - discount_amount + tax_amount;
			document.querySelector("#Total").innerText =  "$" + totalAmount.toFixed(2);
		}
		// Event Listener to see when user clicks on the button (variable of calcBtn comes from the first global variable in the code)
		calcBtn.addEventListener("click", runCalc);


	</script>
</body>

</html>
